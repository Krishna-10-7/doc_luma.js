/*!
 * LumaJS v0.3.0
 * (c) 2025 LumaJS Team
 * @license MIT
 */
"use strict";
/*!
 * LumaJS v0.1.0 - React-like Framework
 * Component-based reactive UI library
 * @license MIT
 */!function(e){let t=null,o=0;function n(e,n){if(!t)throw new Error("useMemo must be called inside a component");const s=t,r=o++,c=!n,u=!s._hooks[r]||!n||!s._hooks[r].deps||n.some((e,t)=>e!==s._hooks[r].deps[t]);if(c||u){const t=e();return s._hooks[r]={type:"memo",value:t,deps:n?[...n]:void 0},t}return s._hooks[r].value}function s(e,t,...o){return{type:e,props:t||{},children:o.flat(1/0).filter(e=>null!=e&&!1!==e).map(e=>"object"==typeof e&&null!==e&&"type"in e?e:{type:"TEXT",props:{},children:[],text:String(e)})}}function r(e){if("TEXT"===e.type)return document.createTextNode(e.text||"");if("function"==typeof e.type){return function(e,t){const o={Component:e,props:t,_hooks:[],_effects:[],_dom:null,_vnode:null,_mounted:!1};return c(o),o}(e.type,e.props)._dom}const t=document.createElement(e.type);return Object.entries(e.props||{}).forEach(([e,o])=>{if(e.startsWith("on")&&"function"==typeof o){const n=e.slice(2).toLowerCase();t.addEventListener(n,o)}else"className"===e?t.className=o:"style"===e&&"object"==typeof o?Object.assign(t.style,o):"children"!==e&&t.setAttribute(e,o)}),e.children.forEach(e=>{t.appendChild(r(e))}),t}function c(e){t=e,o=0,e._effects=[];const n=e.Component(e.props);e._vnode=n;const s=r(n);e._dom&&e._dom.replaceWith(s),e._dom=s,t=null,e._mounted?e._effects.forEach(e=>e()):Promise.resolve().then(()=>{e._mounted=!0,e._effects.forEach(e=>e())})}const u=new Set;let i=!1;const f={h:s,render:function(e,t){const o="string"==typeof t?document.querySelector(t):t;if(!o)throw new Error("[Luma] Container not found");o.innerHTML="",o.appendChild(r(e))},Fragment:function(e){return s("div",{style:{display:"contents"}},e.children)},useState:function(e){if(!t)throw new Error("useState must be called inside a component");const n=t,s=o++;if(!n._hooks[s]){const t=function(e){const t=new Set;let o=e;return{get value(){return o},set value(e){o!==e&&(o=e,t.forEach(e=>e()))},_subscribers:t}}("function"==typeof e?e():e);n._hooks[s]={type:"state",state:t}}const r=n._hooks[s];return[r.state.value,e=>{const t="function"==typeof e?e(r.state.value):e;r.state.value!==t&&(r.state.value=t,function(e){u.add(e),i||(i=!0,Promise.resolve().then(()=>{i=!1;const e=Array.from(u);u.clear(),e.forEach(e=>c(e))}))}(n))}]},useEffect:function(e,n){if(!t)throw new Error("useEffect must be called inside a component");const s=t,r=o++,c=!n,u=!s._hooks[r]||!n||!s._hooks[r].deps||n.some((e,t)=>e!==s._hooks[r].deps[t]);(c||u)&&(s._hooks[r]?.cleanup&&s._hooks[r].cleanup(),s._effects.push(()=>{const t=e();s._hooks[r]&&(s._hooks[r].cleanup=t)})),s._hooks[r]={type:"effect",deps:n?[...n]:void 0,cleanup:s._hooks[r]?.cleanup}},useRef:function(e){if(!t)throw new Error("useRef must be called inside a component");const n=t,s=o++;return n._hooks[s]||(n._hooks[s]={type:"ref",current:e}),n._hooks[s]},useMemo:n,useCallback:function(e,t){return n(()=>e,t)},createElement:r,version:"0.1.0"};"undefined"!=typeof module&&module.exports?module.exports=f:e.Luma=f}("undefined"!=typeof window?window:globalThis);
//# sourceMappingURL=luma.cjs.min.js.map
